<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #e17055;
            --dark-color: #2d3436;
            --light-color: #f8f9fa;
            --border-radius: 15px;
            --shadow: 0 15px 35px rgba(0,0,0,0.15);
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            pointer-events: none;
            animation: backgroundFloat 20s infinite ease-in-out;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            transform: translateY(0);
            animation: slideInUp 0.8s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .header {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #4a5568 100%);
            color: white;
            padding: 50px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shine 4s infinite;
        }

        .header::after {
            content: 'üõ°Ô∏è';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            opacity: 0.3;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .header h1 {
            font-size: 36px;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
            background: linear-gradient(45deg, #ffffff, #e2e8f0);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            font-size: 20px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .progress-container {
            padding: 25px 30px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .progress-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.05), transparent);
            animation: progressBg 3s infinite;
        }

        @keyframes progressBg {
            0%, 100% { left: -100%; }
            50% { left: 100%; }
        }

        .progress-bar {
            width: 100%;
            height: 15px;
            background: #e2e8f0;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            border-radius: 12px;
            transition: var(--transition);
            position: relative;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2.5s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            margin-top: 15px;
            font-weight: 700;
            color: var(--dark-color);
            font-size: 18px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .form-container {
            padding: 50px;
            background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);
            position: relative;
        }

        .stage {
            display: none;
            opacity: 0;
            transform: translateX(30px);
        }

        .stage.active {
            display: block;
            animation: stageSlideIn 0.7s ease-out forwards;
        }

        @keyframes stageSlideIn {
            from {
                opacity: 0;
                transform: translateX(30px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .stage-title {
            font-size: 32px;
            color: var(--dark-color);
            margin-bottom: 40px;
            padding-bottom: 20px;
            display: flex;
            align-items: center;
            position: relative;
        }

        .stage-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            border-radius: 2px;
            animation: borderExpand 0.8s ease-out;
        }

        @keyframes borderExpand {
            from { width: 0; }
            to { width: 100%; }
        }

        .stage-number {
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 20px;
            font-weight: 700;
            font-size: 24px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
            animation: numberPulse 3s infinite;
            position: relative;
            overflow: hidden;
        }

        .stage-number::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg);
            animation: numberShine 4s infinite;
        }

        @keyframes numberShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes numberPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .form-group {
            margin-bottom: 35px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 18px;
            transition: var(--transition);
            position: relative;
        }

        .form-group label::before {
            content: '‚ñ∂';
            color: var(--primary-color);
            margin-left: 8px;
            font-size: 14px;
            opacity: 0.7;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 18px 25px;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            font-family: inherit;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            background: #ffffff;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), 0 8px 25px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .form-group input:hover,
        .form-group select:hover,
        .form-group textarea:hover {
            border-color: #cbd5e0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .form-group input.error {
            border-color: var(--danger-color);
            animation: shake 0.5s ease-in-out;
            background: linear-gradient(135deg, #fef5f5 0%, #fed7d7 100%);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .checkbox-group,
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            padding: 20px 25px;
            border-radius: var(--border-radius);
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .checkbox-item::before,
        .radio-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: var(--transition);
        }

        .checkbox-item:hover::before,
        .radio-item:hover::before {
            left: 100%;
        }

        .checkbox-item:hover,
        .radio-item:hover {
            background: linear-gradient(135deg, #e6fffa 0%, #f0fff4 100%);
            border-color: var(--primary-color);
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.2);
        }

        .checkbox-item input,
        .radio-item input {
            width: auto;
            margin-left: 15px;
            transform: scale(1.4);
            accent-color: var(--primary-color);
        }

        .sub-form {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            padding: 30px;
            border-radius: var(--border-radius);
            margin-top: 25px;
            border-right: 5px solid var(--primary-color);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            animation: fadeIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .sub-form::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--primary-color), var(--success-color));
            border-radius: var(--border-radius);
            z-index: -1;
            opacity: 0.1;
        }

        .sub-form h4 {
            color: var(--dark-color);
            margin-bottom: 25px;
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .sub-form h4::before {
            content: 'üìã';
            margin-left: 10px;
        }

        .map-container {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            border: 3px dashed #a0aec0;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .map-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.15) 0%, transparent 70%);
            animation: mapPulse 6s infinite;
        }

        @keyframes mapPulse {
            0%, 100% { transform: scale(0.8) rotate(0deg); }
            50% { transform: scale(1.3) rotate(180deg); }
        }

        .coordinate-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 25px;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 2px solid #e2e8f0;
            position: relative;
        }

        .buttons::before {
            content: '';
            position: absolute;
            top: -1px;
            left: 0;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            animation: buttonBorder 3s infinite;
        }

        @keyframes buttonBorder {
            0% { width: 0; }
            50% { width: 200px; }
            100% { width: 0; }
        }

        .btn {
            padding: 20px 40px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            min-width: 160px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #5a67d8);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #5a67d8, #4c51bf);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #e2e8f0, #cbd5e0);
            color: #4a5568;
            box-shadow: 0 6px 20px rgba(160, 174, 192, 0.3);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(160, 174, 192, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #00a085);
            color: white;
            font-size: 20px;
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
        }

        .btn-success:hover:not(:disabled) {
            background: linear-gradient(135deg, #00a085, #00b894);
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 18px 45px rgba(0, 184, 148, 0.6);
        }

        .final-message {
            text-align: center;
            padding: 80px 50px;
            animation: successPulse 1s ease-out;
            position: relative;
            overflow: hidden;
        }

        .final-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(0, 184, 148, 0.1) 0%, transparent 70%);
            animation: successRipple 2s infinite;
        }

        @keyframes successRipple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        @keyframes successPulse {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .final-message h3 {
            font-size: 40px;
            color: var(--success-color);
            margin-bottom: 25px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .final-message p {
            font-size: 22px;
            color: var(--dark-color);
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        .status-message {
            padding: 25px;
            margin: 30px 0;
            border-radius: var(--border-radius);
            text-align: center;
            display: none;
            font-weight: 700;
            animation: messageSlide 0.6s ease-out;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(-15px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .status-message.error {
            background: linear-gradient(135deg, #fef2f2, #fed7d7);
            color: var(--danger-color);
            border: 3px solid #fca5a5;
        }

        .status-message.success {
            background: linear-gradient(135deg, #f0fff4, #c6f6d5);
            color: var(--success-color);
            border: 3px solid #9ae6b4;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255,255,255,0.2);
            border-top: 6px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: var(--danger-color);
            font-size: 14px;
            margin-top: 8px;
            animation: errorFadeIn 0.3s ease-out;
        }

        @keyframes errorFadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container { 
                margin: 10px; 
                border-radius: 20px; 
            }
            .form-container { 
                padding: 30px 25px; 
            }
            .stage-title { 
                font-size: 26px; 
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            .stage-number {
                margin: 0;
            }
            .checkbox-group, 
            .radio-group { 
                grid-template-columns: 1fr; 
            }
            .coordinate-inputs { 
                grid-template-columns: 1fr; 
            }
            .buttons { 
                flex-direction: column; 
                gap: 20px; 
            }
            .btn { 
                width: 100%; 
                min-width: auto;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™</h1>
            <p>ÿØ€ïÿ≥ÿ™€ïŸâ Ÿæÿßÿ±ÿßÿ≥ÿ™ŸÜ Ÿà ⁄ÜÿßŸÉÿ±ÿØŸÜŸâ ⁄ò€åŸÜ⁄Ø€ïŸâ Ÿá€ïÿ±€éŸÖŸâ ŸÉŸàÿ±ÿØÿ≥ÿ™ÿßŸÜŸâ ÿπ€éÿ±ÿßŸÇ</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 1 ŸÖŸÜ 4 (25%)</div>
        </div>

        <div class="form-container" id="formContainer">
            <div class="status-message" id="statusMessage"></div>

            <form id="pesticideForm">
                <!-- ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ£ŸàŸÑŸâ -->
                <div class="stage active" id="stage1">
                    <div class="stage-title">
                        <div class="stage-number">1</div>
                        ŸÇŸàŸÜÿßÿ∫Ÿâ €å€ïŸÉ€ïŸÖ - ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ£ŸàŸÑŸâ
                    </div>
                    
                    <div class="form-group">
                        <label>1. ŸÜÿßŸàŸâ ŸÇ⁄ïŸÉ€ïÿ± - ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ®ŸäÿØ:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ŸÜÿßŸàŸâ ÿ≤ÿßŸÜÿ≥ÿ™Ÿâ - ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿπŸÑŸÖŸä:</label>
                                <input type="text" name="scientific_name" required placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿπŸÑŸÖŸä ŸÑŸÑŸÖÿ®ŸäÿØ">
                            </div>
                            <div class="form-group">
                                <label>ŸÜÿßŸàŸâ ÿ®ÿßÿ≤ÿ±⁄ØÿßŸÜŸâ - ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä:</label>
                                <input type="text" name="commercial_name" required placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä ŸÑŸÑŸÖÿ®ŸäÿØ">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>2. Ÿæ€éŸÉŸáÿßÿ™€ïŸâ ÿ¥€éŸà€ïÿ±€åÿ≤ÿ®€ïŸÜÿØŸâ ŸÉ€åŸÖ€åÿß€åŸâ ŸàŸÖÿßÿØÿØ€ïŸâ ŸÉÿßÿ±ÿß - ÿßŸÑÿ™ÿ±ŸÉŸäÿ® ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä ŸàÿßŸÑŸÖÿßÿØÿ© ÿßŸÑŸÅÿπÿßŸÑÿ©:</label>
                        <textarea name="chemical_composition" rows="4" required placeholder="ÿßŸÉÿ™ÿ® ÿßŸÑÿ™ÿ±ŸÉŸäÿ® ÿßŸÑŸÉŸäŸÖŸäÿßÿ¶Ÿä ŸàÿßŸÑŸÖÿßÿØÿ© ÿßŸÑŸÅÿπÿßŸÑÿ© ÿ®ÿßŸÑÿ™ŸÅÿµŸäŸÑ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>3. Ÿæ€éŸÉŸáÿßÿ™€ïŸâ ŸÇ⁄ïŸÉ€ïÿ± ŸáÿßŸàÿ±ÿØ€ï - ÿ™ÿ±ŸÉŸäÿ® ÿßŸÑŸÖÿ®ŸäÿØ ÿßŸÑŸÖÿ≥ÿ™Ÿàÿ±ÿØ:</label>
                        <textarea name="imported_composition" rows="3" required placeholder="ÿßŸÉÿ™ÿ® ÿ™ÿ±ŸÉŸäÿ® ÿßŸÑŸÖÿ®ŸäÿØ ÿßŸÑŸÖÿ≥ÿ™Ÿàÿ±ÿØ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>4. ÿØŸàÿÆŸâ ŸÇ⁄ïŸÉ€ïÿ± - ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ®ŸäÿØ:</label>
                        <select name="pesticide_state" required>
                            <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                            <option value="liquid">ÿ±€ïŸÇ - ÿ≥ÿßÿ¶ŸÑ</option>
                            <option value="powder">ÿ¥ŸÑ - ŸÖÿ≥ÿ≠ŸàŸÇ</option>
                            <option value="gas">⁄Øÿßÿ≤€é - ÿ∫ÿßÿ≤</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>5. ÿ±€é⁄ò€ïŸâ ŸÇ⁄ïŸÉ€ïÿ± ŸáÿßŸàÿ±ÿØ€ï (ŸÉÿ∫ŸÖ/ŸÑÿ™ÿ±) - ŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ®ŸäÿØ ÿßŸÑŸÖÿ≥ÿ™Ÿàÿ±ÿØ:</label>
                        <input type="number" step="0.01" name="import_rate" required placeholder="0.00">
                    </div>

                    <div class="form-group">
                        <label>6. ŸÇ⁄ïŸÉ€ïÿ±€ïŸÉÿßŸÜ ŸÑ€ï ŸÜÿßŸà ⁄ÜŸâ ÿØÿß€å€ï - ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™ ŸÖŸàÿ∂Ÿàÿπÿ© ŸÅŸä:</label>
                        <select name="container_type" required>
                            <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                            <option value="bag">ŸÉ€åÿ≥ - ŸÉŸäÿ≥</option>
                            <option value="can">ÿØ€ïŸÅÿ± - ÿπŸÑÿ®ÿ©</option>
                            <option value="barrel">ÿ®€ïÿ±ŸÖ€åŸÑ - ÿ®ÿ±ŸÖŸäŸÑ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>7. ÿ®€ïŸÉÿßÿ±Ÿá€éŸÜÿßŸÜŸâ ŸÇ⁄ïŸÉ€ïÿ± - ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ®ŸäÿØ:</label>
                        <div class="sub-form">
                            <h4>⁄Øÿ¥ÿ™ŸàŸÉÿß⁄µŸâ - ÿπÿßŸÖ:</h4>
                            <select name="general_use" required>
                                <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                                <option value="insects">ŸÖ€éÿ±ŸàŸà - ÿ≠ÿ¥ÿ±ÿßÿ™</option>
                                <option value="weeds">⁄Ø⁄òŸà⁄Ø€åÿß - ÿ£ÿπÿ¥ÿßÿ®</option>
                                <option value="fungus">ŸÇÿ±ÿ™€éŸÜ€ïÿ± - ŸÅÿ∑ÿ±Ÿäÿßÿ™</option>
                                <option value="other_disease">ŸÜ€ïÿÆŸàÿ¥Ÿâ ÿ™ÿ± - ÿ£ŸÖÿ±ÿßÿ∂ ÿ£ÿÆÿ±Ÿâ</option>
                            </select>
                            <h4 style="margin-top: 20px;">ÿ™€ïŸÜÿØÿ±Ÿàÿ≥ÿ™Ÿâ ŸàŸÖÿßŸÑÿßŸÜ - ÿßŸÑÿµÿ≠ÿ© ŸàÿßŸÑŸÖÿßÿ¥Ÿäÿ©:</h4>
                            <select name="health_livestock_use" required>
                                <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                                <option value="insects">ŸÖ€éÿ±ŸàŸà - ÿ≠ÿ¥ÿ±ÿßÿ™</option>
                                <option value="fungus">ŸÇÿ±ÿ™€éŸÜ€ïÿ± - ŸÅÿ∑ÿ±Ÿäÿßÿ™</option>
                                <option value="other_disease">ŸÜ€ïÿÆŸàÿ¥Ÿâ ÿ™ÿ± - ÿ£ŸÖÿ±ÿßÿ∂ ÿ£ÿÆÿ±Ÿâ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>8. ÿ™ÿß€åÿ®€ïÿ™ŸÖ€ïŸÜÿØŸâ ŸÇ⁄ïŸÉ€ïÿ± ÿ®€ï Ÿæ€éŸâ ÿ™ÿ±ÿ≥ŸÜÿßŸÉŸâ - ÿÆÿµÿßÿ¶ÿµ ÿßŸÑŸÖÿ®ŸäÿØ ÿ≠ÿ≥ÿ® ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©:</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <label>ÿ≤€ÜŸà ⁄Øÿ±ÿØ€ïŸÉÿ±€éÿ™ - ÿ¥ÿØŸäÿØ ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤</label>
                                <input type="checkbox" name="danger_level" value="highly_concentrated">
                            </div>
                            <div class="checkbox-item">
                                <label>ÿ≤€Üÿ± ÿ™ÿ±ÿ≥ŸÜÿßŸÉ€ï - ÿÆÿ∑Ÿäÿ± ÿ¨ÿØÿßŸã</label>
                                <input type="checkbox" name="danger_level" value="very_dangerous">
                            </div>
                            <div class="checkbox-item">
                                <label>ŸÖÿßŸÖŸÜÿßŸà€ïŸÜÿØ€å€ï - ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©</label>
                                <input type="checkbox" name="danger_level" value="moderate">
                            </div>
                            <div class="checkbox-item">
                                <label>ÿ™ÿ±ÿ≥ŸÜÿßŸÉ ŸÜ€å€ï - ÿ∫Ÿäÿ± ÿÆÿ∑Ÿäÿ±</label>
                                <input type="checkbox" name="danger_level" value="not_dangerous">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ© -->
                <div class="stage" id="stage2">
                    <div class="stage-title">
                        <div class="stage-number">2</div>
                        ŸÇŸàŸÜÿßÿ∫Ÿâ ÿØŸàŸà€ïŸÖ - ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©
                    </div>

                    <div class="form-group">
                        <label>9. Ÿæÿßÿ±ÿßÿ≥ÿ™ŸÜ€å ⁄©ÿßÿ±ŸÖ€ïŸÜÿØ€ï⁄©ÿßŸÜ - ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿπÿßŸÖŸÑŸäŸÜ:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ÿ¨ŸÑ Ÿàÿ®ÿ±⁄Ø€å ÿ™ÿß€åÿ®€ïÿ™ŸÖ€ïŸÜÿØ ÿ®€ï ⁄©ÿßÿ±ŸÖ€ïŸÜÿØ€ï⁄©ÿßŸÜ - ÿßŸÑŸÖŸÑÿßÿ®ÿ≥ ŸàÿßŸÑÿ£ÿØŸàÿßÿ™ ÿßŸÑÿÆÿßÿµÿ© ŸÑŸÑÿπÿßŸÖŸÑŸäŸÜ:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="employee_protection_clothes" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="employee_protection_clothes" value="no" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>⁄©€ïÿ±€ïÿ≥ÿ™€ï€å ŸÅÿ±€åÿß⁄©€ïŸàÿ™ŸÜ Ÿà ÿ¶ÿß⁄Øÿ±⁄©Ÿà⁄òÿßŸÜÿØŸÜ€ïŸà€ï - ŸÖÿπÿØÿßÿ™ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ Ÿàÿ•ÿ∑ŸÅÿßÿ° ÿßŸÑÿ≠ÿ±ÿßÿ¶ŸÇ:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="emergency_equipment" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="emergency_equipment" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿØÿßÿ®€åŸÜ ⁄©ÿ±ÿØŸÜ€å ÿ¶ÿßŸÖ€éÿ±Ÿà ⁄©€ïŸÑŸàŸæ€ïŸÑ€å ⁄©€Ü⁄©ÿ±ÿØŸÜ€ïŸà€ï€å ŸÇ⁄ï⁄©€ïÿ±€å ⁄ï⁄òÿßŸà ŸÑ€ï ⁄©€Ü⁄ØÿßÿØÿß ÿ®€ïÿ±ÿØ€å ÿØ€ï⁄©ÿ±€éÿ™ - ÿ™ŸàŸÅÿ± ŸÖÿπÿØÿßÿ™ ÿ™ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™ ÿßŸÑŸÖŸÜÿ≥ŸÉÿ®ÿ©:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="spill_collection_equipment" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="spill_collection_equipment" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿ¶ÿßŸÖ€éÿ±€å ÿ¶ÿß⁄Øÿ±⁄©Ÿà⁄ò€éŸÜ€ïŸà€ïÿå ÿÆÿß⁄©€ïŸÜÿßÿ≤ÿå ÿ¶ÿßŸàÿå ŸÑŸÖÿå Ÿáÿ™ÿØ Ÿá€ï€å€ï - ŸÖÿπÿØÿßÿ™ ÿ•ÿ∑ŸÅÿßÿ° ÿßŸÑÿ≠ÿ±ÿßÿ¶ŸÇÿå ÿ±ŸÖŸÑÿå ŸÖÿßÿ°ÿå ÿßŸÑÿÆ:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="fire_safety_equipment" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="fire_safety_equipment" value="no" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>10. ÿ¶ÿß€åÿß ŸÑ€åÿ≥ÿ™€å ÿ≤ÿßŸÜ€åÿßÿ±€å ÿ™ÿß€åÿ®€ïÿ™ Ÿá€ï€å€ï ŸÑ€ï ⁄Ø€ï⁄µ ÿ¶€ïŸà ŸÇ⁄ï⁄©€ïÿ±€å ŸáÿßŸàÿ±ÿØ€ï ⁄©ÿ±ÿßŸà€ï - ŸáŸÑ ÿ™Ÿàÿ¨ÿØ ŸÇÿßÿ¶ŸÖÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿÆÿßÿµÿ© ŸÖÿπ ÿßŸÑŸÖÿ®ŸäÿØ ÿßŸÑŸÖÿ≥ÿ™Ÿàÿ±ÿØ:</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                <input type="radio" name="information_list_available" value="yes" required>
                            </div>
                            <div class="radio-item">
                                <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                <input type="radio" name="information_list_available" value="no" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>11. ŸÜÿßŸà€å ÿ¶€ïŸà ÿ¥Ÿà€éŸÜ€ï ⁄©€ï ŸÑ€é€å ÿØÿ±Ÿàÿ≥ÿ™⁄©ÿ±ÿßŸà€ï - ÿßÿ≥ŸÖ ŸÖŸÉÿßŸÜ ÿßŸÑÿ™ÿµŸÜŸäÿπ:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ŸÜÿßŸà€å ŸàŸàŸÑÿßÿ™ - ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÑÿØ:</label>
                                <input type="text" name="manufacturing_country" required placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÑÿØ ÿßŸÑŸÖÿµŸÜÿπ">
                            </div>
                            <div class="form-group">
                                <label>ŸÜÿßŸà€å ⁄©€ÜŸÖŸæÿßŸÜ€åÿß€å ÿØÿ±Ÿàÿ≥ÿ™⁄©€ïÿ± - ÿßÿ≥ŸÖ ÿßŸÑÿ¥ÿ±ŸÉÿ© ÿßŸÑŸÖÿµŸÜÿπÿ©:</label>
                                <input type="text" name="manufacturing_company" required placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ¥ÿ±ŸÉÿ© ÿßŸÑŸÖÿµŸÜÿπÿ©">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>12. ŸáÿßŸàÿ±ÿØ€ï⁄©ÿ±ÿØŸÜ ÿ®€Ü ŸÖ€ïÿ®€ïÿ≥ÿ™€å - ÿßŸÑÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ŸÑÿ∫ÿ±ÿ∂:</label>
                        <select name="import_purpose" required>
                            <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                            <option value="direct_use">ÿ®€ï⁄©ÿßÿ±Ÿá€éŸÜÿßŸÜ€å ÿ±ÿßÿ≥ÿ™€ïÿÆ€Ü - ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±</option>
                            <option value="commercial">ÿ®ÿßÿ≤ÿ±⁄ØÿßŸÜ€å - ÿ™ÿ¨ÿßÿ±Ÿä</option>
                            <option value="other">ŸÖ€ïÿ®€ïÿ≥ÿ™€å ÿ™ÿ± - ÿ∫ÿ±ÿ∂ ÿ¢ÿÆÿ±</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>13. ŸÖÿßŸà€ï€å ÿ®€ïÿ±ÿ≥€ï⁄ÜŸàŸà - ŸÅÿ™ÿ±ÿ© ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ÿ±€é⁄©€ïŸàÿ™€å ÿ®€ïÿ±Ÿá€ïŸÖ Ÿá€éŸÜÿßŸÜ - ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ŸÜÿ™ÿßÿ¨:</label>
                                <input type="date" name="production_date" required>
                            </div>
                            <div class="form-group">
                                <label>ÿ±€é⁄©€ïŸàÿ™€å ÿ®€ïÿ±ÿ≥€ïÿ±⁄ÜŸàŸàŸÜ - ÿ™ÿßÿ±ŸäÿÆ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©:</label>
                                <input type="date" name="expiry_date" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>14. ŸÑÿß€å€ïŸÜ€å ŸáÿßŸàÿ±ÿØ€ï - ÿ¨Ÿáÿ© ÿßŸÑÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ŸÜÿßŸà€å ŸÑÿß€å€ïŸÜ€å ÿ≠⁄©ŸàŸÖ€ïÿ™ - ÿßÿ≥ŸÖ ÿßŸÑÿ¨Ÿáÿ© ÿßŸÑÿ≠ŸÉŸàŸÖŸäÿ©:</label>
                                <input type="text" name="government_entity" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ¨Ÿáÿ© ÿßŸÑÿ≠ŸÉŸàŸÖŸäÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)">
                            </div>
                            <div class="form-group">
                                <label>ŸÜÿßŸà€å ⁄©€ïÿ±ÿ™€å ÿ™ÿß€åÿ®€ïÿ™ - ÿßÿ≥ŸÖ ÿßŸÑŸÇÿ∑ÿßÿπ ÿßŸÑÿÆÿßÿµ:</label>
                                <input type="text" name="private_sector" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÇÿ∑ÿßÿπ ÿßŸÑÿÆÿßÿµ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ© -->
                <div class="stage" id="stage3">
                    <div class="stage-title">
                        <div class="stage-number">3</div>
                        ŸÇŸàŸÜÿßÿ∫Ÿâ ÿ≥€é€å€ïŸÖ - ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©
                    </div>

                    <div class="form-group">
                        <label>15. ÿ¥Ÿà€éŸÜ€å Ÿá€ï⁄µ⁄Øÿ±ÿ™ŸÜ€å ŸÇ⁄ï⁄©€ïÿ± ŸÑ€ï ⁄©€Ü⁄ØÿßÿØÿß - ŸÖŸÉÿßŸÜ ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸàÿØÿπ:</label>
                        <div class="sub-form">
                            <div class="form-group">
                                <label>ÿ®€ïÿ±ÿ≤€å ŸÑ€ï ÿ¶ÿßÿ≥ÿ™€å ÿ≤€ïŸà€å (30 ÿ≥ŸÖ) ÿØ€ïÿ®€éÿ™ - ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ ÿπŸÜ ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ£ÿ±ÿ∂ (30 ÿ≥ŸÖ):</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="height_above_ground" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="height_above_ground" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿ¨€Üÿ±€å ÿ¶€ïŸà ÿ®ŸÜ⁄©€ï€å ⁄©€ï ŸÇ⁄ï⁄©€ïÿ±€ï⁄©€ï€å ŸÑ€ï ÿ≥€ïÿ± ÿØÿßÿØ€ïŸÜÿ±€éŸÜ - ŸÜŸàÿπ ÿßŸÑŸÇÿßÿπÿØÿ© ÿßŸÑÿ™Ÿä ÿ™Ÿàÿ∂ÿπ ÿπŸÑŸäŸáÿß ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™:</label>
                                <select name="base_type" required>
                                    <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                                    <option value="steel">ÿ¶ÿßÿ≥ŸÜ€ï - ŸÅŸàŸÑÿßÿ∞</option>
                                    <option value="wood">ÿ™€ïÿÆÿ™€ï€å€ï - ÿÆÿ¥ÿ®</option>
                                    <option value="aluminum">ÿ¶€ïŸÑ€ïŸÖŸÜ€åŸàŸÖ€ï - ÿ£ŸÑŸÖŸÜŸäŸàŸÖ</option>
                                    <option value="plastic">ŸæŸÑÿßÿ≥ÿ™€å⁄©€ï - ÿ®ŸÑÿßÿ≥ÿ™ŸäŸÉ</option>
                                    <option value="other">Ÿá€å ÿ™ÿ± - ÿ£ÿÆÿ±Ÿâ</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>ÿ¨€Üÿ±€å ÿ¶€ïŸà ÿ®ŸÜ⁄©€ï€å ⁄©€ï ŸÇ⁄ï⁄©€ïÿ±€ï⁄©€ï€å ŸÑ€ï ÿ≥€ïÿ± ÿØÿßÿØ€ïŸÜÿ±€éÿ™ ÿ™€ïÿÆÿ™€å€ï ⁄©ÿßÿ±ŸÑ€é⁄© ŸÑ€ï ⁄Ø€ï⁄µ ÿ¶ÿßŸà ÿØ€ï⁄©ÿßÿ™ - ŸáŸÑ ÿßŸÑŸÇÿßÿπÿØÿ© ÿßŸÑÿÆÿ¥ÿ®Ÿäÿ© ÿ™ÿ™ŸÅÿßÿπŸÑ ŸÖÿπ ÿßŸÑŸÖÿßÿ°:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="wood_water_reaction" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="wood_water_reaction" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ŸÖÿßŸà€ï€å ŸÜ€éŸàÿßŸÜ ÿØ€åŸàÿßÿ±€å ⁄©€Ü⁄Øÿß Ÿà ÿ¥Ÿà€éŸÜ€å Ÿá€ï⁄µ⁄Øÿ±ÿ™ŸÜ€å ŸÇ⁄ï⁄©€ïÿ±€ï⁄©€ï (75 ÿ≥ŸÖ) ÿØ€ïÿ®€éÿ™ - ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ÿ®ŸäŸÜ ÿ¨ÿØÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ŸàÿØÿπ ŸàŸÖŸÉÿßŸÜ ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ (75 ÿ≥ŸÖ):</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="wall_distance" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="wall_distance" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿ¶ÿß€åÿß ÿ™ÿßÿ®⁄µ€Ü€å Ÿá€éŸÖÿß⁄©ÿßŸÜ€å (ÿ™ÿ±ÿ≥ŸÜÿß⁄©€åÿå ÿ¨⁄Ø€ïÿ±€ïŸÜ€ï⁄©€éÿ¥ÿßŸÜ... Ÿáÿ™ÿØ) ŸÑ€ï ÿ≥€ïÿ± ÿØ€åŸàÿßÿ±€ï⁄©ÿßŸÜ€å ⁄©€Ü⁄Øÿß⁄©€ïÿØÿß ÿ®€ïÿØ€å ÿØ€ï⁄©ÿ±ÿß - ŸáŸÑ ÿ™Ÿàÿ¨ÿØ ŸÑÿßŸÅÿ™ÿßÿ™ ÿßŸÑÿ™ÿ≠ÿ∞Ÿäÿ± ÿπŸÑŸâ ÿ¨ÿØÿ±ÿßŸÜ ÿßŸÑŸÖÿ≥ÿ™ŸàÿØÿπ:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="warning_signs" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="warning_signs" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿ®ŸàŸàŸÜ€å ŸÖÿßŸà€ï Ÿá€ï€å€ï ŸÑ€ï ŸÜ€éŸàÿßŸÜ ÿ±€éÿ≤€ï⁄©ÿßŸÜ€å Ÿá€ï⁄µ⁄Øÿ±ÿ™ŸÜ€å ŸÇ⁄ï⁄©€ïÿ±€ï⁄©ÿßŸÜ ŸÑ€ï ŸÜÿßŸà ⁄©€Ü⁄ØÿßÿØÿß - Ÿàÿ¨ŸàÿØ ŸÖÿ≥ÿßŸÅÿ© ÿ®ŸäŸÜ ÿµŸÅŸàŸÅ ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="storage_rows_spacing" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="storage_rows_spacing" value="no" required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÿ®ŸàŸàŸÜ€å ÿ™ÿßÿ®⁄µ€Ü€å ÿ≤ÿßŸÜ€åÿßÿ±€å ŸÑ€ïÿ≥€ïÿ± ÿ®€ïÿ±⁄Ø€å ŸÇ⁄ï⁄©€ïÿ±€ï⁄©€ï Ÿá€ï€å€ï - Ÿàÿ¨ŸàÿØ ŸÑŸàÿ≠ÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÑŸâ ÿπÿ®Ÿàÿ© ÿßŸÑŸÖÿ®ŸäÿØ:</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <label>ÿ®€ï⁄µ€é - ŸÜÿπŸÖ</label>
                                        <input type="radio" name="information_label" value="yes" required>
                                    </div>
                                    <div class="radio-item">
                                        <label>ŸÜ€ïÿÆ€éÿ± - ŸÑÿß</label>
                                        <input type="radio" name="information_label" value="no" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ±ÿßÿ®ÿπÿ© -->
                <div class="stage" id="stage4">
                    <div class="stage-title">
                        <div class="stage-number">4</div>
                        ŸÇŸàŸÜÿßÿ∫€å ⁄©€Üÿ™ÿß€å€å - ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
                    </div>

                    <div class="form-group">
                        <label>16. ÿ¶ÿß€åÿß ÿ¶€ïŸà ÿ¶€Üÿ™€ÜŸÖÿ®€éŸÑ€ï€å ⁄©€ï ŸÇ⁄ï⁄©€ïÿ± ÿØ€ï⁄ØŸàÿßÿ≤€éÿ™€ïŸà€ï ÿ®€Ü ŸÜÿßŸà ⁄©€Ü⁄Øÿß ÿØŸàÿß€å ÿ™€ïŸàÿßŸàÿ®ŸàŸàŸÜ€å ⁄Ü€ÜŸÜ Ÿæÿß⁄© ÿØ€ï⁄©ÿ±€éÿ™€ïŸà€ï - ŸÉŸäŸÅ Ÿäÿ™ŸÖ ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ≥Ÿäÿßÿ±ÿ© ÿ®ÿπÿØ ŸÜŸÇŸÑ ÿßŸÑŸÖÿ®ŸäÿØÿßÿ™:</label>
                        <textarea name="vehicle_cleaning_method" rows="3" required placeholder="ÿßÿ¥ÿ±ÿ≠ ÿ∑ÿ±ŸäŸÇÿ© ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ≥Ÿäÿßÿ±ÿ© ÿ®ÿπÿØ ÿßŸÑŸÜŸÇŸÑ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>17. ÿØ€ïÿ±Ÿàÿ®€ïÿ±€å ÿ¥Ÿà€éŸÜ€å ⁄©€Ü⁄Øÿß ⁄©€ï ⁄Ü€å€ï - ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÖÿ≠Ÿäÿ∑ÿ© ÿ®ÿßŸÑŸÖÿ≥ÿ™ŸàÿØÿπ:</label>
                        <select name="surrounding_area" required>
                            <option value="">Ÿá€ï⁄µÿ®⁄ò€éÿ±€ï - ÿßÿÆÿ™ÿ±</option>
                            <option value="residential">ŸÜ€åÿ¥ÿ™€ïÿ¨€é ÿ®ŸàŸàŸÜ - ÿ≥ŸÉŸÜŸä</option>
                            <option value="industrial">Ÿæ€åÿ¥€ïÿ≥ÿßÿ≤€å - ÿµŸÜÿßÿπŸä</option>
                            <option value="agricultural">⁄©ÿ¥ÿ™Ÿà⁄©ÿß⁄µ€å - ÿ≤ÿ±ÿßÿπŸä</option>
                            <option value="other">ÿ¥Ÿà€éŸÜ€å ÿ™ÿ± - ŸÖŸÉÿßŸÜ ÿ¢ÿÆÿ±</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>18. ÿ¥Ÿà€éŸÜ€å ÿ¨Ÿà⁄Øÿ±ÿßŸÅ€å ⁄©€Ü⁄Øÿß (GPS) - ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸä ŸÑŸÑŸÖÿ≥ÿ™ŸàÿØÿπ:</label>
                        <div class="map-container">
                            <div style="text-align: center; color: #7f8c8d; position: relative; z-index: 1;">
                                <p style="font-size: 64px; margin-bottom: 15px;">üìç</p>
                                <p style="font-size: 18px; font-weight: 700;">ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ© - ÿ£ÿØÿÆŸÑ ÿßŸÑÿ•ÿ≠ÿØÿßÿ´Ÿäÿßÿ™ ŸäÿØŸàŸäÿßŸã</p>
                                <p style="font-size: 14px; margin-top: 10px; opacity: 0.8;">GPS Coordinates Required</p>
                            </div>
                        </div>
                        <div class="coordinate-inputs">
                            <div class="form-group">
                                <label>X (East Coordinate) - ÿÆÿ∑ ÿßŸÑÿ∑ŸàŸÑ:</label>
                                <input type="number" step="any" name="east_coordinate" placeholder="ŸÖÿ´ÿßŸÑ: 44.0092" required>
                            </div>
                            <div class="form-group">
                                <label>Y (North Coordinate) - ÿÆÿ∑ ÿßŸÑÿπÿ±ÿ∂:</label>
                                <input type="number" step="any" name="north_coordinate" placeholder="ŸÖÿ´ÿßŸÑ: 36.1911" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>19. ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© - ÿ™€éÿ®€åŸÜ€å ÿ≤€åÿßÿ™ÿ±:</label>
                        <textarea name="additional_notes" rows="4" placeholder="ÿßŸÉÿ™ÿ® ÿ£Ÿä ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸáŸÜÿß (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"></textarea>
                    </div>
                </div>

                <div class="buttons">
                    <button type="button" class="btn btn-secondary" id="prevBtn">
                        ‚Üê Ÿæÿßÿ¥€ï⁄©€ïŸàÿ™ - ÿßŸÑÿ≥ÿßÿ®ŸÇ
                    </button>
                    <button type="button" class="btn btn-primary" id="nextBtn">
                        ÿØŸàÿßÿ™ÿ± - ÿßŸÑÿ™ÿßŸÑŸä ‚Üí
                    </button>
                    <button type="submit" class="btn btn-success" id="submitBtn" style="display: none;">
                        ‚úì ŸÜÿßÿ±ÿØŸÜ - ÿ•ÿ±ÿ≥ÿßŸÑ
                    </button>
                </div>
            </form>
        </div>

        <div class="form-container" id="successMessage" style="display: none;">
            <div class="final-message">
                <h3>‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠</h3>
                <p>ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ÿπÿßŸàŸÜŸÉŸÖ. ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™Ÿä ŸÇÿØŸÖÿ™ŸÖŸàŸáÿß ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™ ŸÖŸÖŸÉŸÜ.</p>
                <p style="margin-top: 30px; font-weight: bold; font-size: 20px;">
                    üèõÔ∏è ŸáŸäÿ¶ÿ© ÿ≠ŸÖÿßŸäÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ®Ÿäÿ¶ÿ© ŸÅŸä ÿ•ŸÇŸÑŸäŸÖ ŸÉÿ±ÿØÿ≥ÿ™ÿßŸÜ ÿßŸÑÿπÿ±ÿßŸÇ
                </p>
            </div>
        </div>
    </div>

    <script>
        // ÿ∂ÿπ ÿ±ÿßÿ®ÿ∑ Google Apps Script Web App ŸáŸÜÿß
        const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxEFiRpdc4dajkqQThZsQEDX0EdIPaMEiRvxPFIAVTVXS_xJBiIDwmImqh5oI48G_lfEw/exec"; 

        const form = document.getElementById('pesticideForm');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const statusMessage = document.getElementById('statusMessage');
        const loadingOverlay = document.getElementById('loadingOverlay');

        const stages = Array.from(document.querySelectorAll('.stage'));
        const formContainer = document.getElementById('formContainer');
        const successMessage = document.getElementById('successMessage');

        let currentStage = 0;

        const stageTitles = [
            "ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 1 ŸÖŸÜ 4",
            "ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 2 ŸÖŸÜ 4", 
            "ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 3 ŸÖŸÜ 4",
            "ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 4 ŸÖŸÜ 4"
        ];

        function updateProgressBar() {
            const progress = ((currentStage + 1) / stages.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${stageTitles[currentStage]} (${Math.round(progress)}%)`;
        }

        function showStage(stageIndex) {
            stages.forEach((stage, index) => {
                if (index === stageIndex) {
                    stage.classList.add('active');
                } else {
                    stage.classList.remove('active');
                }
            });
            updateProgressBar();
            updateButtonStates();
        }

        function updateButtonStates() {
            if (currentStage === 0) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }

            if (currentStage === stages.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
        }

        function validateStage(stageElement) {
            const inputs = stageElement.querySelectorAll('input[required], select[required], textarea[required]');
            const radioGroups = {};
            const checkboxGroups = {};
            let isValid = true;

            // Clear previous errors
            inputs.forEach(input => {
                input.classList.remove('error');
                const parentFormGroup = input.closest('.form-group');
                const existingError = parentFormGroup?.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }
            });

            // Clear checkbox/radio item borders
            stageElement.querySelectorAll('.checkbox-item, .radio-item').forEach(item => {
                item.style.borderColor = 'transparent';
            });

            // Validate regular inputs
            inputs.forEach(input => {
                if (input.type === 'radio') {
                    if (!radioGroups[input.name]) {
                        radioGroups[input.name] = [];
                    }
                    radioGroups[input.name].push(input);
                } else if (input.type === 'checkbox') {
                    if (!checkboxGroups[input.name]) {
                        checkboxGroups[input.name] = [];
                    }
                    checkboxGroups[input.name].push(input);
                } else if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                    showFieldError(input, 'Ÿáÿ∞ÿß ÿßŸÑÿ≠ŸÇŸÑ ŸÖÿ∑ŸÑŸàÿ®');
                }
            });

            // Validate radio groups
            Object.keys(radioGroups).forEach(groupName => {
                const radios = radioGroups[groupName];
                const isGroupValid = radios.some(radio => radio.checked);
                if (!isGroupValid) {
                    isValid = false;
                    radios.forEach(radio => {
                        radio.closest('.radio-item').style.borderColor = 'var(--danger-color)';
                    });
                    showGroupError(radios[0], 'Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ£ÿ≠ÿØ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™');
                }
            });

            // Validate checkbox groups (danger_level)
            Object.keys(checkboxGroups).forEach(groupName => {
                if (groupName === 'danger_level') {
                    const checkboxes = checkboxGroups[groupName];
                    const isGroupValid = checkboxes.some(checkbox => checkbox.checked);
                    if (!isGroupValid) {
                        isValid = false;
                        checkboxes.forEach(checkbox => {
                            checkbox.closest('.checkbox-item').style.borderColor = 'var(--danger-color)';
                        });
                        showGroupError(checkboxes[0], 'Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿ∑Ÿàÿ±ÿ©');
                    }
                }
            });

            return isValid;
        }

        function showFieldError(input, message) {
            const parentFormGroup = input.closest('.form-group');
            if (parentFormGroup && !parentFormGroup.querySelector('.error-message')) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = message;
                parentFormGroup.appendChild(errorDiv);
            }
        }

        function showGroupError(input, message) {
            const parentFormGroup = input.closest('.form-group');
            if (parentFormGroup && !parentFormGroup.querySelector('.error-message')) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = message;
                parentFormGroup.appendChild(errorDiv);
            }
        }

        nextBtn.addEventListener('click', () => {
            if (validateStage(stages[currentStage])) {
                currentStage++;
                showStage(currentStage);
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStage > 0) {
                currentStage--;
                showStage(currentStage);
            }
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            if (!validateStage(stages[currentStage])) {
                return;
            }

            loadingOverlay.classList.add('active');
            statusMessage.style.display = 'none';

            const formData = new FormData(form);
            const data = {};
            
            // Process form data
            formData.forEach((value, key) => {
                if (key === 'danger_level') {
                    if (!data[key]) {
                        data[key] = [];
                    }
                    data[key].push(value);
                } else {
                    data[key] = value;
                }
            });

            // Convert danger_level array to string
            if (data['danger_level'] && Array.isArray(data['danger_level'])) {
                data['danger_level'] = data['danger_level'].join(', ');
            }

            // Add timestamp
            data['submission_timestamp'] = new Date().toLocaleString('ar-EG');

            fetch(WEB_APP_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                setTimeout(() => {
                    loadingOverlay.classList.remove('active');
                    formContainer.style.display = 'none';
                    successMessage.style.display = 'block';
                }, 2000);
            })
            .catch(error => {
                loadingOverlay.classList.remove('active');
                statusMessage.textContent = 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™: ' + error.message;
                statusMessage.classList.add('error');
                statusMessage.style.display = 'block';
                console.error('Error sending data:', error);
            });
        });

        // Initialize form
        showStage(currentStage);

        // Handle checkbox/radio changes to clear errors
        document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
            input.addEventListener('change', () => {
                if (input.checked) {
                    const item = input.closest('.checkbox-item, .radio-item');
                    if (item) {
                        item.style.borderColor = 'transparent';
                    }
                    // Clear group error message
                    const parentFormGroup = input.closest('.form-group');
                    const errorMessage = parentFormGroup?.querySelector('.error-message');
                    if (errorMessage) {
                        errorMessage.remove();
                    }
                }
            });
        });

        // Add smooth transitions for inputs
        document.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('focus', () => {
                input.style.transform = 'translateY(-2px)';
            });
            
            input.addEventListener('blur', () => {
                input.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>